<!DOCTYPE html>
<html lang="en" xmlns:th="http://thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ubah Password</title>
    <link th:href="@{/styles/form.css}" rel="stylesheet" />
    <link th:href="@{/styles/form.css}" rel="stylesheet" />
</head>
<body>

    <div class="form-container">
        <h2>Ubah Password</h2>
        
        <!-- Display the error message if it exists -->
        <div th:if="${success != null}" class="success-message">
            <p th:text="${success}"></p>
        </div>
        <div th:if="${error != null}" class="error-message">
            <p th:text="${error}"></p>
        </div>

        <form th:action="@{/user/ubah-password}" method="post">
            <div>
                <label for="oldPassword">Old Password:</label>
                <input type="password" id="oldPassword" name="oldPassword" required>
            </div>
            
            <div>
                <label for="newPassword">New Password:</label>
                <!-- Regular expression added in pattern attribute for validation -->
                <input type="password" id="newPassword" name="newPassword" required
                       pattern="(?=.*[A-Z])(?=.*\d)[A-Za-z\d]{8,}"
                       title="Password harus memiliki 8 katakter atau lebih, mempunyai minimal 1 huruf besar dan satu angka">
            </div>
            
            <div>
                <label for="confirmPassword">Confirm New Password:</label>
                <input type="password" id="confirmPassword" name="confirmPassword" required>
            </div>
            
            <div>
                <button type="submit">Submit</button>
            </div>
            <div>
                <!-- Button to go back to homepage -->
                <button type="button" class="back-home-btn" 
                    th:if="${role == 'Chief Operating Officer'}"
                    th:onclick="'window.location.href=\'' + @{/opslanding} + '\';'">
                    Back to Homepage
                </button>

                <button type="button" class="back-home-btn" 
                    th:if="${role == 'Store Manager'}"
                    th:onclick="'window.location.href=\'' + @{/smlanding} + '\';'">
                    Back to Homepage
                </button>

                <button type="button" class="back-home-btn" 
                    th:if="${role == 'Marketing'}"
                    th:onclick="'window.location.href=\'' + @{/marketinglanding} + '\';'">
                    Back to Homepage
                </button>

                <button type="button" class="back-home-btn" 
                    th:if="${role == 'Member'}"
                    th:onclick="'window.location.href=\'' + @{/memberlanding} + '\';'">
                    Back to Homepage
                </button>
            </div>
        </form>
    </div>

</body>
</html>
